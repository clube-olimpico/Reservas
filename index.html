<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Clube Olímpico - Sistema de Reservas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
	<!-- Configurações para evitar cache -->
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">

<style>
/* Estilos globais */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

    /* Container da tela de login */
    #loginScreen {
	box-sizing: border-box; /* Garantir que padding e borda sejam incluídos na largura */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #ffffff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    width: 95%;
    max-width: 350px;
    text-align: center; 
}

/* Cabeçalho da tela de login */
#loginHeader {
    margin-bottom: 30px;
}

#loginHeader h1 {
    font-size: 32px;
    color: #333;
    margin: 0;
}

#loginHeader h2 {
    font-size: 24px;
    color: #555;
    margin: 10px 0;
}

#loginHeader h3 {
    font-size: 24px;
    color: #777;
    margin: 40px 0;
}

.input-group {
    display: flex;
    align-items: center; /* Alinha os elementos verticalmente */
    gap: 10px;
    width: 100%;
}

.label-senha {
    white-space: nowrap; /* Impede que o texto do label quebre em várias linhas */
    font-weight: bold;
}


.input-container {
    position: relative; /* Permite posicionamento absoluto do botão */
    display: flex;
    align-items: center;
    gap: 5px;
    width: 100%; /* Ocupa toda a largura disponível */
}


/* Campo de entrada de senha */
.input-container input {
    width: 280%;
    padding-right: 150px; /* Espaço para o botão à direita */
	padding: 12px 16px; /* Padding vertical e horizontal */
    box-sizing: border-box;
	height: 35px; /* Altura menor */
}

/* Botão de alternar senha */
#toggleSenha {
    position: right; /* Posicionamento absoluto dentro do container */
    top: 50%; /* Centraliza verticalmente */
    right: 100px; /* Ajuste este valor para mover o botão mais para a esquerda */
    transform: translateY(-50%); /* Centraliza verticalmente */
    background: none;
    border: none;
    cursor: pointer;
    font-size: 18px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
	max-width: 10%;
}


    /* Título */
    #loginScreen h2 {
        margin-bottom: 20px;
        font-size: 24px;
        color: #333; 
    }

    /* Dropdown de seleção de jogadores */
    #jogadorSelect {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 20px;
    }

    /* Botão de entrar */
    #loginScreen button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
		margin-top: 20px; /* Adiciona espaço entre o último campo e o botão */
    }

    #loginScreen button:hover {
        background-color: #45a049;
    }

    /* Conteúdo principal (inicialmente oculto) */
    #mainContent {
        display: none;
        text-align: center;
    }

    /* Mensagem de boas-vindas */
    #nomeJogador {
        font-weight: bold;
        color: #4CAF50;
    }

    /* Botão de sair */
    #mainContent button {
        background-color: #f44336;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 20px;
    }

    #mainContent button:hover {
        background-color: #d32f2f;
    }


/* Contêiner principal do formulário */
.form-container {
    padding: 10px;
    margin: 0 auto;
    max-width: 500px;
    margin-top: -5px; /* Espaçamento para evitar sobreposição com a barra fixa */
}

/* Configuração das linhas do formulário */
.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 7px;
    flex-wrap: nowrap; /* Mantém label e input na mesma linha */
}

/* Estilização dos labels */
label {
    margin-right: 10px;
    width: 160px; /* Tamanho fixo do label para alinhamento */
    font-size: 1rem;
}

/* Configuração do campo "Nome do Jogador" */
.jogador-input {
    width: 50px; /* Largura fixa para manter consistência */
    box-sizing: border-box; /* Inclui padding e bordas no cálculo da largura */
    margin: 0;
    padding: 5px;
}

/* Responsividade: ajuste para dispositivos móveis */
@media (max-width: 600px) {
    .jogador-input {
        width: 100% !important; /* Campo ocupa toda a largura disponível */
        max-width: 175px; /* Limita a largura máxima */
    }

    /* Aumenta a largura dos campos de entrada em dispositivos móveis */
    input, select, button {
        width: 100% !important; /* Faz com que os campos ocupem toda a largura disponível */
        max-width: 400px; /* Define uma largura máxima para evitar que fiquem muito largos */
    }

    /* Ajusta o tamanho do select de jogadores */
    #jogador1 {
        width: 100% !important;
        max-width: 193px;
    }
	#jogador2 {
        width: 100% !important;
        max-width: 210px;
    }
	#jogador3 {
        width: 100% !important;
        max-width: 210px;
    }
	#jogador4 {
        width: 100% !important;
        max-width: 210px;
    }

    /* Ajusta o tamanho do select de quadra */
    #quadra {
        width: 100% !important;
        max-width: 210px;
    }

    /* Ajusta o tamanho do select de dia */
    #dia {
        width: 100% !important;
        max-width: 210px;
    }

    /* Ajusta o tamanho do select de duração */
    #duracao {
        width: 100% !important;
        max-width: 210px;
    }

    /* Ajusta o tamanho do select de horário */
    #hora {
        width: 100% !important;
        max-width: 210px;
    }
}

/* Estilização geral para inputs, selects e botões */
input, select, button {
    flex-grow: 1;
    padding: 5px;
    font-size: 1rem;
}

/* Contêiner de jogadores (campos dinâmicos) */
.jogadores-container {
    display: flex;
    flex-direction: column;
    margin-top: 0px;
}

/* Botão de adicionar jogador */
.add-jogador {
    font-size: 2rem;
    cursor: pointer;
    color: blue;
    margin-top: 1px;
}

/* Estilização dos botões */
button {
    background-color: #4CAF50;
    color: white;
    border: none;
    cursor: pointer;
    width: 100%;
    padding: 9px;
    margin-top: 1px;
    margin-bottom: -10px;
}

button:hover {
    background-color: #45a049;
}

/* Contêiner para as abas de navegação */
.tab-container {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
    position: fixed; /* Fixa as abas no topo */
    top: 0;
    left: 0;
    width: 100%;
    background-color: white; /* Destaque visual */
    z-index: 1000;
    padding: 3px;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* Adiciona uma sombra */
}

/* Configuração para tabelas */
.tabela-container {
    overflow-x: auto; /* Permite rolagem horizontal */
    width: 100%;
    margin-top: -10px;
}

table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
}

th {
    background-color: #f2f2f2;
}

/* Estilo para cabeçalho */
.header {
    text-align: center;
    font-size: 1.5rem;
    margin-top: 20px;
    margin-bottom: 10px;
    text-indent: 10px; /* Ajuste o valor para o espaçamento desejado */
}

/* Classe para aba selecionada */
.selected {
    font-weight: bold;
    background-color: #228B22;
    color: white;
}

/* Transição de opacidade */
.fade-out {
    transition: opacity 0.3s ease-out;
    opacity: 0;
}

/* Estilização dos botões de aba */
.tab-button {
    position: relative; /* Adiciona posicionamento relativo para o efeito da linha */
    transition: background-color 0.3s ease;
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 5px 20px;
    margin: 5px;
    cursor: pointer;
}

/* Linha inferior do botão selecionado */
.tab-button.selected::after {
    content: "";
    display: block;
    width: 100%;
    height: 3px;
    background-color: #228B22;
    position: absolute;
    bottom: -8px;
    left: 0;
}

.tab-button:hover {
    background-color: #45a049;
}

/* Botão de aba desabilitado */
.tab-button[disabled] {
    cursor: not-allowed;
    background-color: red;
}

/* Aba selecionada */
.tab-button.selected {
    font-weight: bold;
    background-color: #228B22 !important;
    color: white !important;
    border: 2px solid #1A6418 !important;
}

/* Indicadores de carregamento */
#loading {
    display: block;
    text-align: center;
    font-size: 1.5rem;
}

#content {
    display: none;
}

/* Estilização para tela cheia */
.fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: white;
    z-index: 9999;
    overflow: auto;
}

.fullscreen table {
    width: 100%;
    height: auto;
}
</style>
</head>

<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
	
	
<script>
	
//***********************************************************************************************************************************************************************

// Ajuste manual da versão do Sistema
const VersaoSistema = 'v1.0.3'; // Versão atual do sistema 

// Variáveis globais que são configuradas em configuracoes.html
window.DiasParaLimpar = undefined; // Ajuste conforme necessário (1,2,3,4,5,6). Ex: se DiasParaLimpar = 4, só é permitido fazer reserva em até 2 dias de antecedência.
window.vDomingo = undefined; // Valor padrão: fechado, pois o clube não abre aos domingos ("aberto", "fechado").

let quadrasInativas = new Set();
let reservasPorQuadra = {};
let quadraSelecionada = 'Quadra 1 - Coberta';

//***********************************************************************************************************************************************************************

// Bloqueia o menu de contexto e o acesso ao console (descomentar quando publicar)

document.addEventListener('contextmenu', event => event.preventDefault());
document.addEventListener('keydown', event => {
    if (event.key === "F12" || (event.ctrlKey && event.shiftKey && event.key === "I")) {
        event.preventDefault();
    }
});


// Configuração do Firebase
const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "agenda-5ce95.firebaseapp.com",
    projectId: "agenda-5ce95",
    storageBucket: "agenda-5ce95.appspot.com",
    messagingSenderId: "852007565195",
    appId: "1:852007565195:web:d7bd789d140858f53f618e"
};

// Inicialização do Firebase
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// Configuração inicial do banco de dados
function inicializarEstruturaInicial() { 
    const estruturaInicial = {
        config: {
            DiasParaLimpar: 4, // Valor padrão
            vDomingo: "fechado", // Padrão fechado
            Quadras: {
                Quadra1: "liberada",
                Quadra2: "liberada",
                Quadra3: "liberada",
            },
        },
        reservas: {
            "Quadra 1 - Coberta": {},
            "Quadra 2 - Aberta": {},
            "Quadra 3 - Coberta": {},
        },
    };

    database.ref("sistemas").set(estruturaInicial)
        .then(() => {
            console.info("Estrutura inicial criada com sucesso no Firebase.");
        })
        .catch((error) => {
            console.error("Erro ao criar estrutura inicial no Firebase:", error);
        });
}

// Inicialização do sistema
function InicializarSistema() {
    return new Promise((resolve, reject) => {
        const sistemaRef = database.ref("sistemas"); 

        sistemaRef.on('value', (snapshot) => {
            const data = snapshot.val(); 

            if (data) {
                const minVersion = data.version;
                if (VersaoSistema !== minVersion) {
                    alert("Sua versão está desatualizada. Atualize o aplicativo para continuar.");
                    window.close();
                }

                const config = data.config;
				//permissao para abrir o sistema
				 
				if (config && config.Abrir === false) {
                    window.close();
                    return;
                }
			   

                if (config) {
                    window.DiasParaLimpar = config.DiasParaLimpar || 4;
                    window.vDomingo = config.vDomingo || "fechado";

                    quadrasInativas.clear();
                    const quadras = config.Quadras || {};
                    if (quadras.Quadra1 === "interditada") quadrasInativas.add("Quadra 1 - Coberta");
                    if (quadras.Quadra2 === "interditada") quadrasInativas.add("Quadra 2 - Aberta");
                    if (quadras.Quadra3 === "interditada") quadrasInativas.add("Quadra 3 - Coberta");

                    atualizarDatas();
                    atualizarOpcoesHorario();
                }
            } else {
                inicializarEstruturaInicial();
            }

            let quadraInicial = quadraSelecionada || "Quadra 1 - Coberta";
            if (quadrasInativas.has(quadraInicial)) {
                const proximasQuadras = ["Quadra 2 - Aberta", "Quadra 3 - Coberta"].filter(quadra => !quadrasInativas.has(quadra));
                if (proximasQuadras.length > 0) {
                    quadraInicial = proximasQuadras[0];
                } else {
                    quadrasInativas.clear();
                    quadrasInativas.add("Quadra 1 - Coberta");
                    quadrasInativas.add("Quadra 2 - Aberta");
                    quadrasInativas.add("Quadra 3 - Coberta");

                    atualizarEstadoQuadras();

                    const selectQuadra = document.getElementById('quadra');
                    if (selectQuadra) {
                        selectQuadra.innerHTML = "";
                        const defaultOption = document.createElement('option');
                        defaultOption.value = "";
                        defaultOption.textContent = "Nenhuma quadra disponível";
                        selectQuadra.appendChild(defaultOption);
                    }

                    const tabelaContainer = document.querySelector('.tabela-container');
                    const header = document.querySelector('.header');
                    if (tabelaContainer) tabelaContainer.style.display = 'none';
                    if (header) header.style.display = 'none';

                    alert("Todas as quadras estão interditadas no momento.");
                    resolve();
                    return;
                }
            }

            document.querySelectorAll('.tab-button').forEach(button => {
                if (button.innerText.trim() === quadraInicial) {
                    button.classList.add('selected');
                } else {
                    button.classList.remove('selected');
                }
            });

            const selectQuadra = document.getElementById('quadra');
            if (selectQuadra) {
                selectQuadra.innerHTML = "";
                ["Quadra 1 - Coberta", "Quadra 2 - Aberta", "Quadra 3 - Coberta"].forEach(quadra => {
                    if (!quadrasInativas.has(quadra)) {
                        const option = document.createElement('option');
                        option.value = quadra;
                        option.textContent = quadra;
                        selectQuadra.appendChild(option);
                    }
                });
                selectQuadra.value = quadraInicial; 
            }

            const tabelaContainer = document.querySelector('.tabela-container');
            const header = document.querySelector('.header');
            if (tabelaContainer) tabelaContainer.style.display = 'block';
            if (header) {
                header.style.display = 'block';
                header.innerText = quadraInicial;
            }

            atualizarEstadoQuadras();
            selecionarQuadra(quadraInicial);
            resolve();

        }, (error) => {
            console.error("Erro ao carregar dados iniciais:", error);
            reject(error);
        });
    });
}

function atualizarEstadoQuadras() {
    // Atualiza o estado visual das quadras com base no conjunto quadrasInativas
    document.querySelectorAll('.tab-button').forEach(button => {
        const quadraNome = button.innerText.trim();

        if (quadrasInativas.has(quadraNome)) {
            button.style.setProperty("background-color", "red", "important");
            button.style.setProperty("cursor", "not-allowed", "important");
            button.onclick = () => alert(`A ${quadraNome} está interditada provisoriamente.`);
        } else {
            button.style.setProperty("background-color", "#lighgreen", "important");
            button.style.setProperty("cursor", "pointer", "important");
            button.onclick = () => selecionarQuadra(quadraNome);
        }
    });
}

function atualizarReservasQuadra(quadra) {
    limparTabela();
    const reservas = reservasPorQuadra[quadra];
    if (reservas) {
        const tabela = document.getElementById('tabelaCorpo');
        for (const key in reservas) {
            const { jogadores, dia, hora, duracao, borda } = reservas[key];
            const rowIndex = hora - 6;
            const colIndex = dia;

            // Ignorar sábado (coluna 6) das 21:00 às 23:00 e domingo (coluna 7) das 06:00 às 08:00
            if ((colIndex === 6 && hora >= 21 && hora <= 23) || (colIndex === 7 && hora >= 6 && hora <= 8)) {
                continue;
            }

            const cell = tabela.rows[rowIndex]?.cells[colIndex];
            if (cell) {
                cell.innerHTML = jogadores;
                cell.setAttribute("data-duracao", duracao);
                cell.style.backgroundColor = jogadores.toLowerCase().includes('aula') ? 'lightcoral' :
                    (duracao === 1 ? 'lightgreen' : 'lightblue');

                // Configurar bordas para reservas de 1h ou 2h
                if (borda === '1h') {
                    cell.style.border = '2px solid black';
                } else if (borda === '2h') {
                    configurarBordasDuracao2(cell, tabela, rowIndex, colIndex);
                }
            }
        }
    }
}

function configurarBordasDuracao2(cell, tabela, rowIndex, colIndex) {
    if (cell.rowSpan > 1) {
        cell.style.borderTop = '2px solid black';
        cell.style.borderLeft = '2px solid black';
        cell.style.borderRight = '2px solid black';
        cell.style.borderBottom = '2px solid black';
    } else {
        cell.style.borderTop = '2px solid black';
        cell.style.borderLeft = '2px solid black';
        cell.style.borderRight = '2px solid black';
        cell.style.borderBottom = 'none';

        const cellNext = tabela.rows[rowIndex + 1]?.cells[colIndex];
        if (cellNext) {
            cellNext.style.borderTop = 'none';
            cellNext.style.borderLeft = '2px solid black';
            cellNext.style.borderRight = '2px solid black';
            cellNext.style.borderBottom = '2px solid black';
        }
    }
}

function verificarVersao() {
    const elementoVersao = document.getElementById('VersaoSistema');
    if (elementoVersao) {
        elementoVersao.textContent = `${VersaoSistema}`;
    } else {
        console.error('Elemento para exibir a versão não encontrado!');
    }
}

let jogadorCount = 1;

function atualizarEstadoDomingo() {
    const tabela = document.getElementById('tabelaCorpo');
    const diaDomingo = 7; // Índice da coluna correspondente ao domingo

    for (let i = 0; i < tabela.rows.length; i++) {
        const horario = i + 6; // Calcula o horário (06:00 corresponde à linha 0)
        const celulaDomingo = tabela.rows[i].cells[diaDomingo];

        if (vDomingo === 'aberto') {
            if (horario >= 12 && horario <= 23) {
                celulaDomingo.style.backgroundColor = '';
                celulaDomingo.style.pointerEvents = '';
                celulaDomingo.style.cursor = '';
            }
        } else if (vDomingo === 'fechado') {
            if (horario >= 12 && horario <= 23) {
                celulaDomingo.style.backgroundColor = '#f2f2f2';
                celulaDomingo.style.pointerEvents = 'none';
                celulaDomingo.style.cursor = 'not-allowed';
            }
        }
    }
}

function limparTabela() {
    const tabela = document.getElementById('tabelaCorpo');
    for (let i = 0; i < tabela.rows.length; i++) {
        for (let j = 1; j < tabela.rows[i].cells.length - 1; j++) {
            const horario = i + 6;

            if ((j === 6 && horario === 6) || (j === 7 && horario >= 6 && horario <= 7) || (j === 6 && horario >= 21 && horario <= 23)) {
                continue;
            }

            const cell = tabela.rows[i].cells[j];
            if (cell.rowSpan > 1) {
                const nextCell = tabela.rows[i + 1]?.cells[j];
                if (nextCell) {
                    nextCell.style.display = '';
                }
                cell.rowSpan = 1;
            }

            cell.style.borderTop = "1px solid #ddd";
            cell.style.borderBottom = "1px solid #ddd";
            cell.style.borderLeft = "1px solid #ddd";
            cell.style.borderRight = "1px solid #ddd";
            cell.style.backgroundColor = "";
            cell.innerHTML = "";
        }
    }
}

// Função para selecionar a quadra e carregar suas reservas
function selecionarQuadra(quadra) {
    // Obtém o nome original da quadra
    const botoes = document.querySelectorAll('.tab-button');
    let nomeOriginal = null;

    botoes.forEach(button => {
        // Verifica se o botão corresponde ao nome exibido ou ao nome original
        if (
            button.getAttribute('data-nome-original') === quadra ||
            button.innerHTML.replace('<br>', '').trim() === quadra
        ) {
            nomeOriginal = button.getAttribute('data-nome-original');
            
            // Alerta com o label do botão clicado
            const labelBotao = button.textContent.trim(); // Obtém o texto do botão
            //alert(`Label do botão clicado: ${labelBotao}`);
        }
    });

    // alert(`quadra: ${quadra}`); 
    if (!nomeOriginal) {
        // Substitui quebras de linha e espaços múltiplos por um único espaço
        const quadraNormalized = quadra.replace(/[\r\n]+/g, ' ').replace(/\s+/g, ' ').trim();
        //console.log(`Valor ajustado de quadra: "${quadraNormalized}"`);
        //alert(`Valor ajustado de quadra: "${quadraNormalized}"`);
        // Verifica o nome normalizado
        if (quadraNormalized === "Quadra 1 - Coberta" || quadraNormalized === "Quadra 1 Coberta") {
            nomeOriginal = "Quadra 1 - Coberta";
        } else if (quadraNormalized === "Quadra 2 - Aberta" || quadraNormalized === "Quadra 2 Aberta") {
            nomeOriginal = "Quadra 2 - Aberta";
        } else if (quadraNormalized === "Quadra 3 - Coberta" || quadraNormalized === "Quadra 3 Coberta") {
            nomeOriginal = "Quadra 3 - Coberta"; 
        }
    }
	
    //nomeOriginal = "Quadra 3 - Coberta";
	
    //alert(`Quadra selecionada: ${nomeOriginal}`); // Alerta com o nome da quadra

    if (!nomeOriginal) {
        console.error('Quadra não encontrada:', quadra);
        return;
    }

    // Verifica se a quadra está interditada
    const isQuadraInterditada = quadrasInativas.has(nomeOriginal);

    if (isQuadraInterditada) {
        alert(`A ${nomeOriginal} está interditada provisoriamente.`);
        return;
    }

    // Atualiza a quadra selecionada
    quadraSelecionada = nomeOriginal;
    document.querySelector('.header').innerText = nomeOriginal;

    // Remove a classe 'selected' e estilo inline de todos os botões
    botoes.forEach(button => {
        button.classList.remove('selected');
        button.style.backgroundColor = ''; // Remove estilo inline
        button.style.color = ''; // Remove estilo inline
        button.style.border = ''; // Remove estilo inline
    });

    // Adiciona a classe 'selected' e estilo inline ao botão correspondente
    botoes.forEach(button => {
        if (button.getAttribute('data-nome-original') === nomeOriginal) {
            button.classList.add('selected'); // Aplica a classe 'selected' para quadra selecionada
            button.style.backgroundColor = '#228B22'; // Cor verde escuro para quadra selecionada
			button.style.color = 'white'; // Texto branco
            button.style.border = '2px solid #1A6418'; // Borda escura para quadra selecionada (apenas para a verde)
        }

        // Verifica se a quadra está interditada e aplica o estilo vermelho
        if (quadrasInativas.has(button.getAttribute('data-nome-original'))) {
            button.style.backgroundColor = 'red'; // Botão vermelho para quadras interditadas
            button.style.color = 'white'; // Texto branco
            button.style.border = ''; // Remove a borda para o botão vermelho 
        }
    });

    // Atualiza o estado do domingo após selecionar a quadra
    atualizarEstadoDomingo();

    // Atualiza e exibe reservas para a quadra selecionada
    carregarReservas(nomeOriginal);
}




function carregarReservas(quadra) {
    celulasExcluidas.clear();
    reservasExcluidasFirebase.clear();

    const reservasRef = database.ref(`sistemas/reservas/${quadra}`);

    reservasRef.off('value'); // Remove ouvintes antigos
    reservasRef.on('value', (snapshot) => {
        const reservas = snapshot.val();
        limparTabela();

        if (reservas) {
            const tabela = document.getElementById('tabelaCorpo');
            const totalRows = tabela.rows.length;
            const totalCols = tabela.rows[0]?.cells.length || 0;

            for (const key in reservas) {
                const { jogadores, dia, hora, duracao, borda } = reservas[key];
                const rowIndex = hora - 6;
                const colIndex = dia;

                if (rowIndex >= 0 && rowIndex < totalRows && colIndex >= 0 && colIndex < totalCols) {
                    const cell = tabela.rows[rowIndex].cells[colIndex];
                    cell.setAttribute("data-duracao", duracao);

                    let corFundo;
                    if (jogadores.toLowerCase().includes('aula')) {
                        corFundo = 'lightcoral';
                    } else {
                        corFundo = duracao === 1 ? 'lightgreen' : 'lightblue';
                    }
                    cell.style.backgroundColor = corFundo;

                    if (borda === '1h') {
                        cell.style.border = '2px solid black';
                    } else if (borda === '2h') {
                        configurarBordasDuracao2(cell, tabela, rowIndex, colIndex);
                    }

                    if (duracao === 2) {
                        const cellNext = tabela.rows[rowIndex + 1]?.cells[colIndex];
                        if (cellNext) {
                            const proxJogadores = reservas[`${key.split('_')[0]}_${hora + 1}`]?.jogadores;

                            // Verifica se o jogador atual é o mesmo da próxima célula
                            if (proxJogadores === jogadores) {
                                cell.rowSpan = 2; // Une as duas células
                                cell.style.verticalAlign = 'middle';
                                cell.innerHTML = jogadores; // Exibe os jogadores na célula unida
                                cellNext.style.display = 'none'; // Oculta a próxima célula
                                configurarBordasDuracao2(cell, tabela, rowIndex, colIndex);
                            } else {
                                cell.innerHTML = jogadores; // Exibe os jogadores diretamente na célula
                            }
                        }
                    } else {
                        // Reserva normal: Exibe o nome diretamente na célula
                        cell.innerHTML = jogadores;
                    }
                }
            }
        }

        // Bloqueia horários de domingo, se aplicável
        if (vDomingo === 'fechado') {
            const diaDomingo = 7; // Índice do domingo
            const tabela = document.getElementById('tabelaCorpo');
            for (let i = 0; i < tabela.rows.length; i++) {
                const horario = i + 6; // Calcula o horário baseado na linha
                const celulaDomingo = tabela.rows[i].cells[diaDomingo];
                if (horario >= 12 && horario <= 23) {
                    celulaDomingo.style.backgroundColor = '#f2f2f2'; // Cor cinza
                    celulaDomingo.style.pointerEvents = 'none'; // Desativa interação
                    celulaDomingo.style.cursor = 'not-allowed'; // Cursor bloqueado
                }
            }
        }

        adicionarEventoClique();
    });
}

function validarDiaReserva(jogadores) {
    // Verifica se é uma reserva de "aula"
    if (jogadores.some(jogador => jogador.toLowerCase().includes('aula'))) {
        return true; // Permite a reserva sem validação
    }

    const diasParaLimpar = window.DiasParaLimpar;
    const hoje = new Date();
    hoje.setHours(0, 0, 0, 0);

    const diaSelecionado = parseInt(document.getElementById('dia').value);

    let maxDiasPermitidos;
    switch (diasParaLimpar) {
        case 1: maxDiasPermitidos = 5; break;
        case 2: maxDiasPermitidos = 4; break;
        case 3: maxDiasPermitidos = 3; break;
        case 4: maxDiasPermitidos = 2; break;
        case 5: maxDiasPermitidos = 1; break;
        case 6: maxDiasPermitidos = 0; break;
        default: return false;
    }

    const ultimoDiaPermitido = new Date(hoje);
    ultimoDiaPermitido.setDate(hoje.getDate() + maxDiasPermitidos);

    const diferencaDias = (diaSelecionado - hoje.getDay() + 7) % 7;
    const dataSelecionada = new Date(hoje);
    dataSelecionada.setDate(hoje.getDate() + diferencaDias);

    if (dataSelecionada > ultimoDiaPermitido || dataSelecionada < hoje) {
        const msg = gerarMensagemErro(diasParaLimpar);
        alert(msg);
        return false;
    }

    return true;
}


async function validarSeTemReserva(jogadores) {
    console.log("Iniciando validação de reservas...");
    return new Promise((resolve) => {
        let conflito = false;
        let jogadoresComConflito = [];

        const reservasRef = database.ref("sistemas/reservas");
        reservasRef.once("value").then((snapshot) => {
            const reservas = snapshot.val() || {};
            console.log("Reservas carregadas do banco de dados:", reservas);

            const agora = new Date();
            const diaSelecionado = parseInt(document.getElementById('dia').value, 10);
            const horaSelecionada = parseInt(document.getElementById('hora').value, 10);
            const duracaoSelecionada = parseInt(document.getElementById('duracao').value, 10);

            // Criando data e hora exatas da nova reserva
            const novaReservaDataHoraInicio = new Date(agora);
            novaReservaDataHoraInicio.setDate(agora.getDate() + ((diaSelecionado + 7 - agora.getDay()) % 7));
            novaReservaDataHoraInicio.setHours(horaSelecionada, 0, 0, 0);
            console.log(`Nova reserva: Início - ${novaReservaDataHoraInicio}`);

            const novaReservaDataHoraFim = new Date(novaReservaDataHoraInicio);
            novaReservaDataHoraFim.setHours(novaReservaDataHoraInicio.getHours() + duracaoSelecionada);
            console.log(`Nova reserva: Fim - ${novaReservaDataHoraFim}`);

            // Verificando reservas existentes
            for (const quadra in reservas) {
                console.log("Verificando quadra:", quadra);
                for (const key in reservas[quadra]) {
                    const reserva = reservas[quadra][key];
                    console.log("Verificando reserva existente:", reserva);

                    jogadores.forEach(jogador => {
                        if (reserva.jogadores.includes(jogador)) {
                            const reservaDia = parseInt(reserva.dia, 10);
                            const reservaHora = parseInt(reserva.hora, 10);
                            const reservaDuracao = parseInt(reserva.duracao, 10) || 1;

                            // Criando data/hora exata da reserva existente
                            const reservaDataHoraInicio = new Date(agora);
                            reservaDataHoraInicio.setDate(agora.getDate() + ((reservaDia + 7 - agora.getDay()) % 7));
                            reservaDataHoraInicio.setHours(reservaHora, 0, 0, 0);
                            console.log(`Reserva existente: Início - ${reservaDataHoraInicio}`);

                            const reservaDataHoraFim = new Date(reservaDataHoraInicio);
                            reservaDataHoraFim.setHours(reservaDataHoraInicio.getHours() + reservaDuracao);
                            console.log(`Reserva existente: Fim - ${reservaDataHoraFim}`);

                            // **Regra definitiva:**
                            // Bloqueia reserva se houver qualquer reserva futura pendente (em qualquer dia)
                            if (reservaDataHoraInicio > agora) {
                                console.log(`O jogador ${jogador} já tem uma reserva FUTURA e não pode criar outra.`);
                                conflito = true;
                                if (!jogadoresComConflito.includes(jogador)) {
                                    jogadoresComConflito.push(jogador);
                                }
                            }

                            // Bloqueia reserva se o jogador já tem uma reserva em andamento
                            if (agora >= reservaDataHoraInicio && agora < reservaDataHoraFim) {
                                console.log(`O jogador ${jogador} já tem uma reserva EM ANDAMENTO e não pode criar outra.`);
                                conflito = true;
                                if (!jogadoresComConflito.includes(jogador)) {
                                    jogadoresComConflito.push(jogador);
                                }
                            }
                        }
                    });
                }
                if (conflito) break;
            }

            // Se houver conflito, exibe mensagem de erro
            if (conflito) {
                const mensagem = jogadoresComConflito.length > 1
                    //? `Os jogadores ${jogadoresComConflito.join(", ")} já têm uma reserva futura ou em andamento e precisam esperar antes de agendar outra.`
                    //: `O jogador ${jogadoresComConflito[0]} já tem uma reserva futura ou em andamento e precisa esperar antes de agendar outra.`;
					? `Os jogadores ${jogadoresComConflito.join(", ")} ainda têm uma reserva ativa e não podem agendar outra antes de finalizá-la.`
                    : `O jogador ${jogadoresComConflito[0]} ainda tem uma reserva ativa e não pode agendar outra antes de finalizá-la.`;
                console.log("Mensagem de erro: ", mensagem);
                alert(mensagem);
                resolve(false);
            } else {
                console.log("Nenhum conflito encontrado, reserva pode ser realizada.");
                resolve(true);
            }
        });
    });
}




function gerarMensagemErro(diasParaLimpar) {
    let diasAntecedencia;
    switch (diasParaLimpar) {
        case 1: diasAntecedencia = 5; break;
        case 2: diasAntecedencia = 4; break;
        case 3: diasAntecedencia = 3; break;
        case 4: diasAntecedencia = 2; break;
        case 5: diasAntecedencia = 1; break;
        case 6: return "Só é permitido fazer reservas para o dia atual.";
        default: return "Valor de DiasParaLimpar inválido.";
    }
    limparCampos();
    return `Não é permitido fazer reservas com mais de ${diasAntecedencia} dias de antecedência.`; 
}

window.atualizarOpcoesHorario = function() {
    const duracao = document.getElementById('duracao').value;
    const dia = document.getElementById('dia').value;
    const hora = document.getElementById('hora');
    hora.innerHTML = '';

    if (!duracao || !dia) {
        return;
    }

    if (dia == 7 && vDomingo === 'fechado') {
        if (duracao === '1') {
            for (let i = 8; i <= 11; i++) {
                hora.innerHTML += `<option value="${i}">${i}:00 - ${i + 1}:00</option>`;
            }
        } else if (duracao === '2') {
            for (let i = 8; i <= 10; i++) {
                hora.innerHTML += `<option value="${i}">${i}:00 - ${i + 2}:00</option>`;
            }
        }
    } else if (dia == 6) {
        if (duracao === '1') {
            for (let i = 7; i < 21; i++) {
                hora.innerHTML += `<option value="${i}">${i}:00 - ${i + 1}:00</option>`;
            }
        } else if (duracao === '2') {
            for (let i = 7; i < 20; i++) {
                hora.innerHTML += `<option value="${i}">${i}:00 - ${i + 2}:00</option>`;
            }
        }
    } else {
        if (duracao === '1') {
            for (let i = 6; i <= 22; i++) {
                hora.innerHTML += `<option value="${i}">${i}:00 - ${i + 1}:00</option>`;
            }
        } else if (duracao === '2') {
            for (let i = 6; i <= 21; i++) {
                hora.innerHTML += `<option value="${i}">${i}:00 - ${i + 2}:00</option>`;
            }
        }
    }
};

window.adicionarJogador = function() {
    if (jogadorCount < 4) {
        jogadorCount++;
        const jogadoresContainer = document.getElementById('jogadoresContainer');

        const newDiv = document.createElement('div');
        newDiv.className = 'form-row';

        const label = document.createElement('label');
        label.setAttribute('for', `jogador${jogadorCount}`);
        label.textContent = 'Jogador:';

        const select = document.createElement('select');
        select.id = `jogador${jogadorCount}`;
        select.name = `jogador${jogadorCount}`;

        // Carrega os jogadores no novo campo de seleção
        const jogadoresRef = database.ref("sistemas/cadastro/jogadores");
        jogadoresRef.on('value', (snapshot) => {
            const jogadores = snapshot.val();
            select.innerHTML = '<option value="">Selecione um jogador</option>'; // Limpa as opções existentes

            if (jogadores) {
                Object.keys(jogadores).forEach((nome) => {
                    const apelido = jogadores[nome].apelido;

                    // Verifica se o jogador já foi selecionado em algum campo anterior
                    let jaSelecionado = false;
                    for (let i = 1; i < jogadorCount; i++) {
                        const jogadorSelect = document.getElementById(`jogador${i}`);
                        if (jogadorSelect && jogadorSelect.value === apelido) {
                            jaSelecionado = true;
                            break;
                        }
                    }

                    // Se o jogador não foi selecionado, adiciona como opção
                    if (!jaSelecionado) {
                        const option = document.createElement('option');
                        option.value = apelido; // Usa o apelido como valor
                        option.textContent = nome; // Exibe o nome do jogador
                        select.appendChild(option);
                    }
                });
            }
        });

        newDiv.appendChild(label);
        newDiv.appendChild(select);
        jogadoresContainer.appendChild(newDiv);

        select.focus();
    }
};



async function atualizarTabela() {
    console.log("Iniciando atualização da tabela...");

    const jogadores = [];
    for (let i = 1; i <= jogadorCount; i++) {
        let jogadorSelect = document.getElementById(`jogador${i}`);
        if (jogadorSelect) {
            let apelido = jogadorSelect.value;
            if (apelido) {
                jogadores.push(apelido);
            }
        }
    }

    console.log("Jogadores selecionados:", jogadores);

    if (jogadores.length === 0) {
        alert('Selecione pelo menos 1 jogador.');
        return;
    }

    const duracao = parseInt(document.getElementById('duracao').value);
    if (duracao === 2 && (jogadores.length < 2 || jogadores.length > 4)) {
        alert('Reservas de 2 horas precisam ter no mínimo 2 e no máximo 4 jogadores.');
        return;
    }

    if (jogadores.length > 4) {
        alert('O máximo permitido são 4 jogadores.');
        return;
    }

    const quadra = document.getElementById('quadra').value;
    if (quadrasInativas.has(quadra)) {
        alert(`A ${quadra} está interditada provisoriamente.`);
        limparCampos();
        return;
    }

    const dia = parseInt(document.getElementById('dia').value, 10);
    const horaSelecionada = parseInt(document.getElementById('hora').value, 10);

    console.log("Dia selecionado:", dia, "Hora selecionada:", horaSelecionada, "Duração:", duracao);

    // Verifica se algum dos jogadores é "Convidado"
    const isConvidado = jogadores.includes("Convidado");
    if (isConvidado) {
        // Acessa as configurações do convidado
        const configRef = database.ref("sistemas/config/Convidados");
        const snapshot = await configRef.once('value');
        const convidadoConfig = snapshot.val();

        if (!convidadoConfig) {
            alert("Configurações do convidado não encontradas.");
            return;
        }

        // Verifica se a quadra selecionada é permitida para o convidado
        const quadraPermitida = convidadoConfig[`Quadra${quadra.split(' ')[1]}`];
        if (!quadraPermitida) {
            // Monta a mensagem informando quais quadras são permitidas
            const quadrasPermitidas = [];
            if (convidadoConfig.Quadra1) quadrasPermitidas.push("Quadra 1 - Coberta");
            if (convidadoConfig.Quadra2) quadrasPermitidas.push("Quadra 2 - Aberta");
            if (convidadoConfig.Quadra3) quadrasPermitidas.push("Quadra 3 - Coberta");

            const mensagemQuadras = quadrasPermitidas.length > 0
                ? `O convidado só pode utilizar as seguintes quadras: ${quadrasPermitidas.join(", ")}.`
                : "O convidado não pode utilizar nenhuma quadra.";

            alert(mensagemQuadras);
            return;
        }

        // Verifica os dias permitidos para o convidado
        const diaDaSemana = dia >= 1 && dia <= 5; // Segunda a sexta
        const fimDeSemana = dia === 6 || dia === 7; // Sábado e domingo

        if (!convidadoConfig.DiasDeSemana && !convidadoConfig.FimDeSemana) {
            alert("O convidado não pode utilizar as quadras em nenhum dia.");
            return;
        }

        if (!convidadoConfig.DiasDeSemana && diaDaSemana) {
            alert("O convidado só pode utilizar as quadras no fim de semana (sábado e domingo).");
            return;
        }

        if (!convidadoConfig.FimDeSemana && fimDeSemana) {
            alert("O convidado só pode utilizar as quadras durante a semana (segunda a sexta).");
            return;
        }
    }

    if (!validarDiaReserva(jogadores)) {
        console.log("Validação de dia falhou.");
        return;
    }

    console.log("Verificando se já existe uma reserva ativa...");
    const reservaValida = await validarSeTemReserva(jogadores);
    if (!reservaValida) {
        console.log("Validação de reserva falhou. Bloqueando agendamento.");
        limparCampos();
        return;
    }

    console.log("Reserva liberada, prosseguir com o agendamento.");

    if (horaSelecionada < 6 || horaSelecionada > 22) {
        alert('Horário selecionado deve ser entre 6 e 22.');
        return;
    }

    const tabela = document.getElementById('tabelaCorpo');
    let horarioInicial = horaSelecionada - 6;

    const reservasRef = database.ref(`sistemas/reservas/${quadra}`);
    reservasRef.once('value', (snapshot) => {
        const reservas = snapshot.val() || {};
        let horariosLivres = true;

        for (let i = 0; i < duracao; i++) {
            const horarioChave = `${dia}_${horaSelecionada + i}`;
            if (reservas[horarioChave]) {
                horariosLivres = false;
                break;
            }
        }

        if (!horariosLivres) {
            alert('Um ou mais horários já estão reservados para essa quadra!');
            limparCampos();
            return;
        }

        let corFundo = jogadores.some(jogador => jogador.toLowerCase().includes('aula'))
            ? 'lightcoral'
            : (duracao === 1 ? 'lightgreen' : 'lightblue');

        if (duracao === 1) {
            const key = `${dia}_${horaSelecionada}`;
            const reservaData = {
                jogadores: jogadores.join(', '),
                dia: dia,
                hora: horaSelecionada,
                duracao: 1,
                borda: '1h'
            };
            reservasRef.child(key).set(reservaData)
                .catch(error => console.error("Erro ao salvar a reserva:", error));
        } else if (duracao === 2) {
            if (jogadores.length === 1) {
                tabela.rows[horarioInicial].cells[dia].innerHTML = jogadores[0];
                tabela.rows[horarioInicial + 1].cells[dia].innerHTML = jogadores[0];
            } else {
                if (jogadores.length >= 1) {
                    tabela.rows[horarioInicial].cells[dia].innerHTML = jogadores[0];
                }
                if (jogadores.length >= 2) {
                    tabela.rows[horarioInicial + 1].cells[dia].innerHTML = jogadores[1];
                }
                if (jogadores.length >= 3) {
                    tabela.rows[horarioInicial].cells[dia].innerHTML += `, ${jogadores[2]}`;
                }
                if (jogadores.length === 4) {
                    tabela.rows[horarioInicial + 1].cells[dia].innerHTML += `, ${jogadores[3]}`;
                }
            }

            tabela.rows[horarioInicial].cells[dia].style.backgroundColor = corFundo;
            tabela.rows[horarioInicial + 1].cells[dia].style.backgroundColor = corFundo;
            tabela.rows[horarioInicial].cells[dia].style.border = '2px solid black';

            const key1 = `${dia}_${horaSelecionada}`;
            const key2 = `${dia}_${horaSelecionada + 1}`;

            const reservaData1 = {
                jogadores: tabela.rows[horarioInicial].cells[dia].innerHTML,
                dia: dia,
                hora: horaSelecionada,
                duracao: 2,
                borda: '2h'
            };

            const reservaData2 = {
                jogadores: tabela.rows[horarioInicial + 1].cells[dia].innerHTML,
                dia: dia,
                hora: horaSelecionada + 1
            };

            reservasRef.child(key1).set(reservaData1)
                .catch(error => console.error("Erro ao salvar a reserva:", error));
            reservasRef.child(key2).set(reservaData2)
                .catch(error => console.error("Erro ao salvar a reserva:", error));
        }

        selecionarQuadra(quadra);
        limparCampos();
    });
}



// Função para adicionar evento de clique nas células
function adicionarEventoClique() {
    const tabela = document.getElementById('tabelaCorpo');

    for (let i = 0; i < tabela.rows.length; i++) {
        for (let j = 0; j < tabela.rows[i].cells.length; j++) {
            const celula = tabela.rows[i].cells[j];

            // Remove qualquer evento de clique anterior
            celula.onclick = null;

            // Ignora as células das colunas 0 e 8 (que contêm os horários)
            if (j !== 0 && j !== 8) {
                celula.onclick = function () {
                    if (celula.innerHTML !== "") {
                        // Verifica se o conteúdo da célula é "aula"
                        const mensagem = celula.innerHTML.trim().toLowerCase() === "aula"
                            ? "Você quer excluir esta aula?"
                            : "Você quer excluir esta reserva?";

                        const confirmacao = confirm(mensagem);
                        if (confirmacao) {
                            excluirReserva(i, j); // Passa a posição da célula
                        }
                    }
                };
            }
        }
    }
}

// Variável global para rastrear células já excluídas
const celulasExcluidas = new Set();

function excluirReserva(horaIndex, diaIndex) {
    const tabela = document.getElementById('tabelaCorpo');
    const celulaId = `${horaIndex}_${diaIndex}`;

    // Armazenar a quadra selecionada localmente para evitar qualquer interferência
    const quadraAtual = quadraSelecionada;

    // Evita duplicidade de exclusão
    if (celulasExcluidas.has(celulaId)) {
        return;
    }

    // Primeira célula
    const primeiraCelula = tabela.rows[horaIndex]?.cells[diaIndex];
    if (!primeiraCelula) {
        return;
    }

    const duracao = primeiraCelula.getAttribute('data-duracao');

    if (duracao === "2") {
        // Segunda célula
        const segundaCelula = tabela.rows[horaIndex + 1]?.cells[diaIndex];

        // Limpa as células
        requestAnimationFrame(() => {
            limparCelula(primeiraCelula);
            limparCelula(segundaCelula);
        });

        // Restaura o rowSpan
        if (primeiraCelula.rowSpan === 2) {
            primeiraCelula.rowSpan = 1;
            if (segundaCelula) segundaCelula.style.display = ''; // Torna a segunda célula visível novamente
        }

        // Exclusão no Firebase, garantindo que a quadra correta seja usada
        excluirReservaFirebase(horaIndex + 6, diaIndex, quadraAtual);
        excluirReservaFirebase(horaIndex + 7, diaIndex, quadraAtual);
    } 
    else if (duracao === "1") {
        requestAnimationFrame(() => {
            limparCelula(primeiraCelula);
        });

        excluirReservaFirebase(horaIndex + 6, diaIndex, quadraAtual);
    } 
    else {
        return;
    }

    // Marca a célula como excluída
    celulasExcluidas.add(celulaId);

    // Atualiza a interface para a quadra atual, sem alterar o foco
    carregarReservas(quadraAtual);
}

// Função para limpar o conteúdo da célula
function limparCelula(celula) {
    if (celula) {
        celula.innerHTML = ""; // Limpa o conteúdo da célula
        celula.style.backgroundColor = ""; // Restaura a cor de fundo
        celula.style.border = "1px solid #ddd"; // Restaura a borda padrão
        celula.removeAttribute('data-duracao'); // Remove o atributo de duração

        // Remover rowSpan apenas se a reserva for de 2 horas e tiver apenas um jogador
        if (celula.rowSpan === 2) {
            celula.rowSpan = 1; // Restaura o rowSpan para o padrão
        }
    }
}

const reservasExcluidasFirebase = new Set();

function excluirReservaFirebase(horaSelecionada, diaIndex, quadra) {
    const key = `${diaIndex}_${horaSelecionada}`;

    if (!reservasExcluidasFirebase.has(key)) {
        reservasExcluidasFirebase.add(key);
        database.ref(`sistemas/reservas/${quadra}/${key}`).remove()
            .then(() => {
                reservasExcluidasFirebase.delete(key);
            })
            .catch((error) => console.error(`Erro ao remover a reserva do Firebase: ${error}`));
    }
}

function limparCampos() {
    // Não reseta o campo "Jogador 1" e mantém o seu valor
    const jogadoresContainer = document.getElementById('jogadoresContainer');
    while (jogadoresContainer.children.length > 1) {
        jogadoresContainer.removeChild(jogadoresContainer.lastChild); // Remove apenas os campos de jogador adicionais
    }
    jogadorCount = 1; // Reseta o contador de jogadores para 1
    document.getElementById('dataForm').reset(); // Reseta o formulário
    document.getElementById('jogador1').value = ''; // Mantém o campo "Jogador 1"
    document.getElementById('duracao').value = '1'; // Reseta a duração para 1 hora
    atualizarOpcoesHorario(); // Atualiza as opções de horário
}

// Monitora as alterações no Firebase
const reservasRef = database.ref('sistemas/reservas/' + quadraSelecionada);
reservasRef.off('value'); // Remove ouvintes anteriores

reservasRef.on('value', (snapshot) => {
    const reservas = snapshot.val();

    limparTabela(); // Limpa toda a tabela antes de preencher com dados atualizados

    if (reservas) {
        for (const key in reservas) {
            const { jogadores, dia, hora, duracao, borda } = reservas[key];
            const rowIndex = hora - 6;

            // Atualiza a célula com os jogadores recuperados do Firebase
            document.getElementById('tabelaCorpo').rows[rowIndex].cells[dia].innerHTML = jogadores;

            // Aplica a cor de fundo com base na reserva
            let corFundo;
            if (jogadores.toLowerCase().includes('aula')) {
                corFundo = 'lightcoral';
            } else {
                corFundo = duracao === 1 ? 'lightgreen' : 'lightblue';
            }

            const cell = document.getElementById('tabelaCorpo').rows[rowIndex]?.cells[dia];
            if (cell) {
                cell.style.backgroundColor = corFundo;
            }

            // Aplica bordas dependendo da duração da reserva
            if (borda === '1h') {
                document.getElementById('tabelaCorpo').rows[rowIndex].cells[dia].style.border = '2px solid black';
            } else if (borda === '2h') {
                document.getElementById('tabelaCorpo').rows[rowIndex].cells[dia].style.borderTop = '2px solid black';
                document.getElementById('tabelaCorpo').rows[rowIndex].cells[dia].style.borderLeft = '2px solid black';
                document.getElementById('tabelaCorpo').rows[rowIndex].cells[dia].style.borderRight = '2px solid black';
                document.getElementById('tabelaCorpo').rows[rowIndex].cells[dia].style.borderBottom = 'none';

                document.getElementById('tabelaCorpo').rows[rowIndex + 1].cells[dia].style.borderTop = 'none';
                document.getElementById('tabelaCorpo').rows[rowIndex + 1].cells[dia].style.borderLeft = '2px solid black';
                document.getElementById('tabelaCorpo').rows[rowIndex + 1].cells[dia].style.borderRight = '2px solid black';
                document.getElementById('tabelaCorpo').rows[rowIndex + 1].cells[dia].style.borderBottom = '2px solid black';
            }
        }

        // Após recuperar as reservas, adicionar eventos de clique nas células
        adicionarEventoClique();
    }
});

function atualizarDatas() {
  const dataInicio = new Date();
  let diaDaSemana = dataInicio.getDay(); 
  const dias = document.querySelectorAll("th");

  const linhaDatas = dias[0].parentNode.nextElementSibling;

  try {
    LimparDiasAnteriores();
  } catch (error) {}

  switch (DiasParaLimpar) {
    case 1:
      switch (diaDaSemana) {
        case 0: preencherCeldas(dataInicio, [1, 2, 3, 4, 5, -1, 0], linhaDatas); break;
        case 1: preencherCeldas(dataInicio, [0, 1, 2, 3, 4, 5, -1], linhaDatas); break;
        case 2: preencherCeldas(dataInicio, [-1, 0, 1, 2, 3, 4, 5], linhaDatas); break;
        case 3: preencherCeldas(dataInicio, [5, -1, 0, 1, 2, 3, 4], linhaDatas); break;
        case 4: preencherCeldas(dataInicio, [4, 5, -1, 0, 1, 2, 3], linhaDatas); break;
        case 5: preencherCeldas(dataInicio, [3, 4, 5, -1, 0, 1, 2], linhaDatas); break;
        case 6: preencherCeldas(dataInicio, [2, 3, 4, 5, -1, 0, 1], linhaDatas); break;
      }
      break;
    case 2:
      switch (diaDaSemana) {
        case 0: preencherCeldas(dataInicio, [1, 2, 3, 4, -2, -1, 0], linhaDatas); break;
        case 1: preencherCeldas(dataInicio, [0, 1, 2, 3, 4, -2, -1], linhaDatas); break;
        case 2: preencherCeldas(dataInicio, [-1, 0, 1, 2, 3, 4, -2], linhaDatas); break;
        case 3: preencherCeldas(dataInicio, [-2, -1, 0, 1, 2, 3, 4], linhaDatas); break;
        case 4: preencherCeldas(dataInicio, [4, -2, -1, 0, 1, 2, 3], linhaDatas); break;
        case 5: preencherCeldas(dataInicio, [3, 4, -2, -1, 0, 1, 2], linhaDatas); break;
        case 6: preencherCeldas(dataInicio, [2, 3, 4, -2, -1, 0, 1], linhaDatas); break;
      }
      break;
    case 3:
      switch (diaDaSemana) {
        case 0: preencherCeldas(dataInicio, [1, 2, 3, -3, -2, -1, 0], linhaDatas); break;
        case 1: preencherCeldas(dataInicio, [0, 1, 2, 3, -3, -2, -1], linhaDatas); break;
        case 2: preencherCeldas(dataInicio, [-1, 0, 1, 2, 3, -3, -2], linhaDatas); break;
        case 3: preencherCeldas(dataInicio, [-2, -1, 0, 1, 2, 3, -3], linhaDatas); break;
        case 4: preencherCeldas(dataInicio, [-3, -2, -1, 0, 1, 2, 3], linhaDatas); break;
        case 5: preencherCeldas(dataInicio, [3, -3, -2, -1, 0, 1, 2], linhaDatas); break;
        case 6: preencherCeldas(dataInicio, [2, 3, -3, -2, -1, 0, 1], linhaDatas); break;
      }
      break;
    case 4:
      switch (diaDaSemana) {
        case 0: preencherCeldas(dataInicio, [1, 2, -4, -3, -2, -1, 0], linhaDatas); break;
        case 1: preencherCeldas(dataInicio, [0, 1, 2, -4, -3, -2, -1], linhaDatas); break;
        case 2: preencherCeldas(dataInicio, [-1, 0, 1, 2, -4, -3, -2], linhaDatas); break;
        case 3: preencherCeldas(dataInicio, [-2, -1, 0, 1, 2, -4, -3], linhaDatas); break;
        case 4: preencherCeldas(dataInicio, [-3, -2, -1, 0, 1, 2, -4], linhaDatas); break;
        case 5: preencherCeldas(dataInicio, [-4, -3, -2, -1, 0, 1, 2], linhaDatas); break;
        case 6: preencherCeldas(dataInicio, [2, -4, -3, -2, -1, 0, 1], linhaDatas); break;
      }
      break;
    case 5:
      switch (diaDaSemana) {
        case 0: preencherCeldas(dataInicio, [1, -5, -4, -3, -2, -1, 0], linhaDatas); break;
        case 1: preencherCeldas(dataInicio, [0, 1, -5, -4, -3, -2, -1], linhaDatas); break;
        case 2: preencherCeldas(dataInicio, [-1, 0, 1, -5, -4, -3, -2], linhaDatas); break;
        case 3: preencherCeldas(dataInicio, [-2, -1, 0, 1, -5, -4, -3], linhaDatas); break;
        case 4: preencherCeldas(dataInicio, [-3, -2, -1, 0, 1, -5, -4], linhaDatas); break;
        case 5: preencherCeldas(dataInicio, [-4, -3, -2, -1, 0, 1, -5], linhaDatas); break;
        case 6: preencherCeldas(dataInicio, [-5, -4, -3, -2, -1, 0, 1], linhaDatas); break;
      }
      break;
    case 6:
      switch (diaDaSemana) {
        case 0: preencherCeldas(dataInicio, [-6, -5, -4, -3, -2, -1, 0], linhaDatas); break;
        case 1: preencherCeldas(dataInicio, [0, -6, -5, -4, -3, -2, -1], linhaDatas); break;
        case 2: preencherCeldas(dataInicio, [-1, 0, -6, -5, -4, -3, -2], linhaDatas); break;
        case 3: preencherCeldas(dataInicio, [-2, -1, 0, -6, -5, -4, -3], linhaDatas); break;
        case 4: preencherCeldas(dataInicio, [-3, -2, -1, 0, -6, -5, -4], linhaDatas); break;
        case 5: preencherCeldas(dataInicio, [-4, -3, -2, -1, 0, -6, -5], linhaDatas); break;
        case 6: preencherCeldas(dataInicio, [-5, -4, -3, -2, -1, 0, -6], linhaDatas); break;
      }
      break;
  }
}

function preencherCeldas(dataInicio, ajustes, linhaDatas) {
  for (let i = 0; i < ajustes.length; i++) {
    let novaData = new Date(dataInicio);
    novaData.setDate(dataInicio.getDate() + ajustes[i]);

    linhaDatas.children[i].innerHTML = novaData.toLocaleDateString('pt-BR');
  }
}

function LimparDiasAnteriores() {
  const dataAtual = new Date();
  dataAtual.setHours(0, 0, 0, 0);

  const quadras = ["Quadra 1 - Coberta", "Quadra 2 - Aberta", "Quadra 3 - Coberta"];
  const tabela = document.getElementById('tabelaCorpo');

  quadras.forEach(quadra => {
    for (let dia = 1; dia <= DiasParaLimpar; dia++) {
      const dataParaLimpar = new Date(dataAtual);
      dataParaLimpar.setDate(dataAtual.getDate() - dia);
      const diaIndex = dataParaLimpar.getDay() || 7;

      for (let hora = 6; hora < 22; hora++) {
        const horaIndex = hora - 6;
        const key = `${diaIndex}_${hora}`;

        if ((diaIndex === 6 && hora === 6) || (diaIndex === 7 && hora >= 6 && hora < 8) || (diaIndex === 6 && hora >= 21 && hora <= 23)) {
          continue; 
        }

        const reservaRef = database.ref(`sistemas/reservas/${quadra}/${key}`);
        reservaRef.once('value', (snapshot) => {
          const reserva = snapshot.val();
          if (reserva) {
            const { jogadores } = reserva;
            if (jogadores && (jogadores.toLowerCase().includes('aula'))) {
              return;
            }
            const celula = tabela.rows[horaIndex]?.cells[diaIndex];
            if (celula) {
              limparCelula(celula);
            }
            reservaRef.remove()
              .catch(error => {});
          }
        }, (error) => {});
      }
    }
  });
}



function carregarJogadores(jogadorLogado) {
    return new Promise((resolve, reject) => {
        console.log("🔄 Iniciando carregamento dos jogadores...");

        const jogadoresRef = database.ref("sistemas/cadastro/jogadores");

        jogadoresRef.once('value', (snapshot) => {
            const jogadores = snapshot.val();
            console.log("📥 Dados recebidos do Firebase:", jogadores);

            if (!jogadores) {
                console.warn("⚠️ Nenhum jogador encontrado no banco de dados.");
                resolve();
                return;
            }

            // Lista de IDs dos selects que devem ser preenchidos
            let idsSelects = ["jogador1", "jogador2", "jogador3", "jogador4"]; // Apenas tela de entrada de dados

            if (!jogadorLogado) {
                // Se não estiver logado, também carrega jogadores na tela de login
                idsSelects.push("jogadorSelect");
            }

            idsSelects.forEach(id => {
                const select = document.getElementById(id);
                if (select) {
                    select.innerHTML = '<option value="">Selecione um jogador</option>'; // Reseta as opções
                    
                    Object.keys(jogadores).forEach((nome) => {
                        const apelido = jogadores[nome].apelido;
                        console.log(`✅ Adicionando jogador: ${nome} (${apelido})`);

                        const option = document.createElement('option');
                        option.value = apelido;
                        option.textContent = nome;
                        select.appendChild(option);
                    });
                } else {
                    console.warn(`⚠️ Campo de seleção não encontrado: ${id}`);
                }
            });

            resolve();
        }, (error) => {
            console.error("❌ Erro ao carregar jogadores:", error);
            reject(error);
        });
    });
}





// Chame a função para carregar os jogadores ao carregar a página
window.onload = function () {
    console.log("✅ Página carregada - Chamando verificarVersao()");
    verificarVersao();

    let jogadorLogado = localStorage.getItem('jogadorLogado');
    let loginScreen = document.getElementById('loginScreen');
    let contentElement = document.getElementById('content');
    let loadingElement = document.getElementById('loading');

    console.log("🔄 Chamando carregarJogadores()");

    carregarJogadores(jogadorLogado).then(() => {
        console.log("✅ Jogadores carregados com base no estado de login!");
		
		
		//desmarccar esse trecho para canccelar o login do usuario
		
		jogadorLogado = 'LOGADO'; 
		
		// ***********************************************
		
		

        if (jogadorLogado) {
            // O usuário já está autenticado, então esconde a tela de login
            loginScreen.style.display = 'none';
            contentElement.style.display = 'none';
            console.log("✅ Jogador já autenticado, pulando tela de login.");

            InicializarSistema().then(() => {
                if (loadingElement) loadingElement.style.display = 'none';
                contentElement.style.display = 'block';
            }).catch(error => {
                console.error("❌ Erro ao inicializar o sistema:", error);
            });

        } else {
            // O usuário precisa fazer login
            loginScreen.style.display = 'block';
            contentElement.style.display = 'none';

            InicializarSistema().then(() => {
                console.log("✅ Sistema inicializado!");
                if (loadingElement) loadingElement.style.display = 'none';
            }).catch(error => {
                console.error("❌ Erro ao inicializar o sistema:", error);
            });
        }
    }).catch(error => {
        console.error("❌ Erro ao carregar jogadores:", error);
    });
};





document.addEventListener('DOMContentLoaded', () => {
//alert('entrei no addEventListener');
    const tabelaContainer = document.querySelector('.tabela-container');
    const horariosColuna = document.querySelectorAll('#tabelaCorpo td:first-child, #tabelaCorpo td:last-child');
    let isExpanded = false;

    // Ajusta os horários em telas pequenas
    const ajustarHorariosCelular = () => {
        const larguraTela = window.innerWidth;

        if (larguraTela <= 600) { // Verifica se a tela é pequena
            horariosColuna.forEach(celula => {
                if (celula.textContent.includes(' - ')) {
                    const horarios = celula.textContent.split(' - ');
                    celula.innerHTML = `${horarios[0]}<br>${horarios[1]}`; // Quebra os horários em linhas
                }
            });
        }
    };

    // Chamada inicial ao carregar a página
    ajustarHorariosCelular();

    // Listener para alterar layout ao clicar duas vezes
    tabelaContainer.addEventListener('dblclick', (event) => {
        const target = event.target;

        if ((target.tagName === 'TH' || target.tagName === 'TD') && target.innerText.includes('Horários')) {
            if (isExpanded) {
                tabelaContainer.style.marginTop = "-10px";
            } else {
                tabelaContainer.style.marginTop = "55px";
            }

            isExpanded = !isExpanded;
            tabelaContainer.classList.toggle('fullscreen');
        }
    });
	
	
	const header = document.querySelector('.header'); // Seleciona o título da quadra
    let tapCount = 0; // Contador de toques
    let lastTapTime = 0; // Tempo do último toque

    header.addEventListener('click', () => {
        const currentTime = new Date().getTime();
        const tapInterval = 300; // Intervalo máximo entre toques (em milissegundos)

        // Verifica se o tempo entre os toques é menor que o intervalo definido
        if (currentTime - lastTapTime < tapInterval) {
            tapCount++;
        } else {
            tapCount = 1; // Reseta o contador se o intervalo for maior
        }

        lastTapTime = currentTime;

        // Se o usuário tocar 3 vezes no título
        if (tapCount === 3) {
            tapCount = 0; // Reseta o contador
            confirmarLogout(); // Chama a função de confirmação de logout
        }
    });

    // Nova funcionalidade: Ajusta os nomes dos botões para celular
    const ajustarNomesBotoes = () => {
        const larguraTela = window.innerWidth;
        const botoes = document.querySelectorAll('.tab-button');

        botoes.forEach(botao => {
            const nomeOriginal = botao.getAttribute('data-nome-original'); // Recupera o nome original
            if (!nomeOriginal) {
                botao.setAttribute('data-nome-original', botao.innerHTML); // Armazena o nome original uma única vez
            }

            if (larguraTela <= 600) {
                // Ajuste para celular: quebra o texto em duas linhas
                const partesNome = botao.getAttribute('data-nome-original').split(' - ');
                if (partesNome.length === 2) {
                    botao.innerHTML = `${partesNome[0]}<br>${partesNome[1]}`;
                }
            } else {
                // Ajuste para computador: restaura o nome original
                botao.innerHTML = botao.getAttribute('data-nome-original');
            }
        });
    };

    // Ajuste inicial e ao redimensionar a tela
    ajustarNomesBotoes();
    window.addEventListener('resize', ajustarNomesBotoes);
});





function fazerLogin() {
    let jogadorSelect = document.getElementById('jogadorSelect');
    let jogadorSelecionado = jogadorSelect.value; // Apelido selecionado
    let loginScreen = document.getElementById('loginScreen');
    let contentElement = document.getElementById('content');

    if (jogadorSelecionado) {
        // Busca o nome completo do jogador com base no apelido selecionado
        const jogadoresRef = database.ref("sistemas/cadastro/jogadores");
        jogadoresRef.once('value', (snapshot) => {
            const jogadores = snapshot.val();
            let nomeCompleto = '';

            // Encontra o nome completo correspondente ao apelido selecionado
            Object.keys(jogadores).forEach((nome) => {
                if (jogadores[nome].apelido === jogadorSelecionado) {
                    nomeCompleto = nome; // Armazena o nome completo
                }
            });

            if (nomeCompleto) {
                // Exibe o nome completo do jogador na mensagem de confirmação
                const confirmacao = confirm(`Você selecionou o jogador: ${nomeCompleto}. Deseja continuar?`);

                if (confirmacao) {
                    // Grava o nome completo no localStorage
                    localStorage.setItem('jogadorLogado', nomeCompleto); // Salva o nome completo
                    loginScreen.style.display = 'none';
                    contentElement.style.display = 'block';
                } else {
                    // Se o usuário cancelar, limpa a seleção
                    jogadorSelect.value = '';
                }
            } else {
                alert("Jogador não encontrado.");
            }
        });
    } else {
        alert("Selecione um jogador válido.");
    }
}


 function confirmarLogout() {
    const jogadorLogado = localStorage.getItem('jogadorLogado'); // Recupera o nome do jogador logado

    // Mensagem personalizada com o nome do jogador
    const confirmacao = confirm(`Você está logado como ${jogadorLogado}. Deseja realmente sair do sistema?`);

    if (confirmacao) {
        fazerLogout(); // Se o usuário confirmar, faz o logout
    }
}


function fazerLogout() {
    localStorage.removeItem('jogadorLogado'); // Remove o jogador logado do localStorage
    window.location.reload(); // Recarrega a página para voltar à tela de login
}


</script>



<body>

 <!-- Tela de carregamento -->
    <div id="loading" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2rem; background-color: white; width: 100%; height: 100vh; display: flex; align-items: center; justify-content: center; z-index: 9999;">
        Carregando... Aguarde.
    </div>

<!-- Tela de Login -->
<div id="loginScreen">
    <!-- Cabeçalho com as informações do clube -->
    <div id="loginHeader">
        <h1>Clube Olímpico</h1>
        <h2>Quadras de Tênis</h2>
        <h3>Sistema de Reservas</h3>
    </div>

    <!-- Painel de seleção de jogadores -->
    <div id="loginForm">
        <h2>Selecione seu nome:</h2>
        <div class="input-group">
            <select id="jogadorSelect">
                <option value="">Carregando jogadores...</option>
            </select>
        </div>
        
       <div class="input-container">
    <label for="senha" class="label-senha">Senha:</label>
    <input type="password" id="senha" placeholder="Digite sua senha" inputmode="numeric" pattern="[0-9]*" maxlength="8">
    <button type="button" id="toggleSenha">👁️</button>
</div>
        
        <button onclick="fazerLogin()">Entrar</button>
    </div>
</div>

<!-- Conteúdo Principal -->
<div id="mainContent" style="display: none; text-align: center;">
    <h2>Bem-vindo, <span id="nomeJogador"></span>!</h2>
    <button onclick="fazerLogout()">Sair</button>
</div>


<!-- Conteúdo da página (inicialmente oculto) -->
<div id="content" style="display: none;">

<div class="tab-container" style="display: flex; justify-content: center; margin-bottom: 10px;">
    <button class="tab-button" onclick="selecionarQuadra('Quadra 1 - Coberta')">Quadra 1 - Coberta</button>
    <button class="tab-button" onclick="selecionarQuadra('Quadra 2 - Aberta')">Quadra 2 - Aberta</button>
    <button class="tab-button" onclick="selecionarQuadra('Quadra 3 - Coberta')">Quadra 3 - Coberta</button>
</div>



<div id="VersaoSistema" style="text-align: right; margin-top: 70px; margin-right: 10px; font-size: 1rem; color: #555; cursor: default; position: relative; z-index: 9999;">
    
</div>


 



<div class="form-container">
    <form id="dataForm">
	
	    <div class="form-row">
			<label for="quadra">Quadra:</label>
			<select id="quadra">
				<option value="Quadra 1 - Coberta">Quadra 1 - Coberta</option>
				<option value="Quadra 2 - Aberta">Quadra 2 - Aberta</option>
				<option value="Quadra 3 - Coberta">Quadra 3 - Coberta</option>
			</select>
		</div>



        <div class="form-row">
            <label for="dia">Dia:</label>
            <select id="dia"  onchange="atualizarOpcoesHorario()">
				<option value="1">Segunda-Feira</option>
				<option value="2">Terça-Feira</option>
				<option value="3">Quarta-Feira</option>
				<option value="4">Quinta-Feira</option>
				<option value="5">Sexta-Feira</option>
				<option value="6">Sábado</option>
				<option value="7">Domingo</option>
			</select>

        </div>

        <div class="form-row">
            <label for="duracao">Duração:</label>
            <select id="duracao" onchange="atualizarOpcoesHorario()">
                <option value="1">1 hora</option>
                <option value="2">2 horas</option>
            </select>
        </div>

        <div class="form-row">
            <label for="hora">Horário:</label>
            <select id="hora">
                <!-- As opções de horário serão ajustadas pelo JavaScript -->
            </select>
        </div>

        <div class="jogadores-container" id="jogadoresContainer">
			<div class="form-row">
				<label for="jogador1">Jogador:</label>
				<select id="jogador1" name="jogador" required style="width: 100px;">
					<option value="">Selecione um jogador</option>
				</select>
				<span class="add-jogador" onclick="adicionarJogador()">+</span>
			</div>
		</div>

        <button type="button" onclick="atualizarTabela()">Agendar</button>
    </form>
</div>

<div style="display: flex; justify-content: space-between; align-items: center;">
    <h2 class="header" style="margin: 1;">Quadra 1 - Coberta</h2> <!-- Título à esquerda -->
    
    <!-- Legenda de Cores -->
    <div style="margin-left: 20px;margin-right: 10px; text-align: left;">
        <strong>Legenda:</strong>
        <ul style="list-style-type: none; padding: 0; margin: 0;">
            <li>
                <span style="display: inline-block; width: 20px; height: 20px; background-color: lightgreen; margin-right: 5px;"></span>
                1 Hora
            </li>
            <li>
                <span style="display: inline-block; width: 20px; height: 20px; background-color: lightblue; margin-right: 5px;"></span>
                2 Horas
            </li>
			<li>
                <span style="display: inline-block; width: 20px; height: 20px; background-color: lightcoral; margin-right: 5px;"></span>
                aula
            </li>
			
        </ul>
    </div>
</div>

<div class="tabela-container">
<table id="tabelaQuadra" style="width: 100%; margin-top: 10px;">
    <tr>
        <th rowspan="2" style="text-align: center;">Horários</th>
        <th>Segunda-Feira</th>
        <th>Terça-Feira</th>
        <th>Quarta-Feira</th>
        <th>Quinta-Feira</th>
        <th>Sexta-Feira</th> 
        <th>Sábado</th>
        <th>Domingo</th>
        <th rowspan="2" style="text-align: center;">Horários</th>
    </tr>
    <tr style="background-color: #f2f2f2;">
        <td style="font-weight: bold; font-size: 0.9em;">09/10/24</td>
        <td style="font-weight: bold; font-size: 0.9em;">10/10/24</td>
        <td style="font-weight: bold; font-size: 0.9em;">11/10/24</td>
        <td style="font-weight: bold; font-size: 0.9em;">12/10/24</td>
        <td style="font-weight: bold; font-size: 0.9em;">13/10/24</td>
        <td style="font-weight: bold; font-size: 0.9em;">14/10/24</td>
        <td style="font-weight: bold; font-size: 0.9em;">15/10/24</td>
    </tr>
    <tbody id="tabelaCorpo">
        <tr>
			<td>06:00 - 07:00</td>
			<td></td><td></td><td></td><td></td><td></td>
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Sábado -->
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Domingo -->
			<td>06:00 - 07:00</td>
		</tr>
		<tr>
			<td>07:00 - 08:00</td>
			<td></td><td></td><td></td><td></td><td></td>
			<td></td>
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Domingo -->
			<td>07:00 - 08:00</td>
		<tr>
            <td>08:00 - 09:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>08:00 - 09:00</td>
        </tr>
        <tr>
            <td>09:00 - 10:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>09:00 - 10:00</td>
        </tr>
        <tr>
            <td>10:00 - 11:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>10:00 - 11:00</td>
        </tr>
        <tr>
            <td>11:00 - 12:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>11:00 - 12:00</td>
        </tr>
        <!-- Horários bloqueados para domingo -->
        <tr>
            <td>12:00 - 13:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>12:00 - 13:00</td>
        </tr>
        <tr>
            <td>13:00 - 14:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>13:00 - 14:00</td>
        </tr>
        <tr>
            <td>14:00 - 15:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>14:00 - 15:00</td>
        </tr>
        <tr>
            <td>15:00 - 16:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>15:00 - 16:00</td>
        </tr>
        <tr>
            <td>16:00 - 17:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>16:00 - 17:00</td>
        </tr>
        <tr>
            <td>17:00 - 18:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>17:00 - 18:00</td>
        </tr>
        <tr>
            <td>18:00 - 19:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>18:00 - 19:00</td>
        </tr>
        <tr>
            <td>19:00 - 20:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>19:00 - 20:00</td>
        </tr>
        <tr>
            <td>20:00 - 21:00</td>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td>
            <td>20:00 - 21:00</td>
        </tr>
        <tr>
			<td>21:00 - 22:00</td>
			<td></td><td></td><td></td><td></td><td></td>
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Sábado -->
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Domingo -->
			<td>21:00 - 22:00</td>
		</tr>
        <tr>
			<td>22:00 - 23:00</td>
			<td></td><td></td><td></td><td></td><td></td>
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Sábado -->
			<td style="background-color: #f2f2f2; pointer-events: none; cursor: not-allowed;"></td> <!-- Domingo -->
			<td>22:00 - 23:00</td>
		</tr>
    </tbody>
</table>
</div>
</div>
</body>

<script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('toggleSenha').addEventListener('click', function () {
                let senhaInput = document.getElementById('senha');
                senhaInput.type = senhaInput.type === 'password' ? 'text' : 'password';
            });
        });
</script>


<footer style="text-align: center; margin-top: 20px; font-size: 0.9em; color: #555;">
        Desenvolvido por Ronaldo Taborda
    </footer>
</html>
