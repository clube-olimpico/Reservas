<!DOCTYPE html>
<html>
<head>
  <title>Pirâmides do Tênis</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    /* Estilos Gerais */
    body {
        background-color: white;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
    }

    /* ESTILO DA TELA DE CARREGAMENTO */
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        z-index: 1000;
        transition: opacity 0.5s ease-out;
    }
    
    /* ESTILOS PARA AS ABAS */
    .tab-container {
        display: flex;
        justify-content: center;
        width: 100%;
        padding: 10px 0;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
        background-color: white;
    }
    .tab-button {
        flex: 1;
        text-align: center;
        transition: background-color 0.3s ease;
        border: 2px solid transparent;
        color: white;
        padding: 10px 0;
        margin: 0 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        border-radius: 8px;
		position: relative; 
    }
    .tab-button.masculina { background-color: #4CAF50; }
    .tab-button.feminina { background-color: #DB7093; }
    .tab-button:hover { opacity: 0.9; }
    .tab-button.selected {
		outline: 2px solid #333;
		outline-offset: -2px; /* Puxa a borda para dentro do botão */
	}
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* Estilos Comuns */
    .pyramid-container {
        overflow-x: auto;
        width: 100%;
        display: flex;
        justify-content: center;
    }
    .pyramid {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: Arial, sans-serif;
        font-size: 14px;
    }
    .row { display: flex; }
    .cell {
      width: 120px;
      height: 80px;
      border: 1px solid black;
      display: flex;
      justify-content: center;  
      align-items: center;
      flex-direction: column;
      font-weight: bold;
      text-align: center;
      position: relative;   
    }

    .title-container {
        font-family: Arial, sans-serif;
        text-align: center;
        font-size: 1.8em;
        font-weight: bold;
        line-height: 1.4;
        margin-bottom: 30px;
        margin-top: 20px;
    }
    .divider {
        width: 100%;
        max-width: 350px;
        height: 5px;
        margin: 30px auto;
        border-radius: 3px;
    }
    
    /* ESTILOS DA PIRÂMIDE MASCULINA */
    #piramide-masculina .title-container { color: #2E8B57; }
    #piramide-masculina .divider { background: linear-gradient(to right, #d3d3d3, #808080, #d3d3d3); }
    #piramide-masculina .cell { border: 1px solid black; }
    #piramide-masculina .cell .posicao { font-size: 14px; font-weight: bold; color: #333333; position: absolute; top: 10px; }
    #piramide-masculina .cell .nome { font-size: 18px; font-weight: bold; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2); transition: transform 0.2s ease-in-out; margin-top: 15px; }
    #piramide-masculina .cell .nome:hover { transform: scale(1.1); color: #3498db; text-shadow: 2px 2px 5px rgba(52, 152, 219, 0.5); }
    #piramide-masculina .row:nth-child(-n+3) .cell { background-color: lightgray; color: #2c3e50; }
    #piramide-masculina .row:nth-child(n+4):nth-child(-n+5) .cell { background-color: #b0c4de; color: #1a1a1a; }
    #piramide-masculina .row:nth-child(n+6):nth-child(-n+7) .cell { background-color: #87ceeb; color: #555555; }
    #piramide-masculina .row:nth-child(n+8) .cell { background-color: #6495ed; color: #333333; }

    /* REDUÇÃO PARA TELA GRANDE */
    #piramide-masculina .pyramid {
        transform: scale(0.75);
        transform-origin: top center;
    }

    /* ESTILOS DA PIRÂMIDE FEMININA */
    #piramide-feminina .title-container { color: #8B008B; }
    #piramide-feminina .divider { background: linear-gradient(to right, #D8BFD8, #E6E6FA, #D8BFD8); }
    #piramide-feminina .cell { border: 1px solid #888888; border-radius: 15px; box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.05); background-color: white; }
    #piramide-feminina .badge { position: absolute; top: 4px; left: 6px; font-size: 18px; font-weight: bold; color: #8B008B; }
    #piramide-feminina .nome { font-size: 16px; font-weight: bold; color: #6A5ACD; margin-top: 8px; display: flex; flex-direction: column; align-items: center; gap: 2px; }
    #piramide-feminina .row { gap: 5px; margin-bottom: 5px; }
    #piramide-feminina .row:nth-child(1) .cell { background-color: #F8F8FF; }
    #piramide-feminina .row:nth-child(2) .cell, #piramide-feminina .row:nth-child(3) .cell { background-color: #F0F0FA; }
    #piramide-feminina .row:nth-child(4) .cell, #piramide-feminina .row:nth-child(5) .cell { background-color: #FAF0F5; }

    /* Responsividade */
    @media (max-width: 768px) {
        #piramide-masculina .pyramid { transform: scale(0.30); transform-origin: top center; }
        #piramide-feminina .pyramid { transform: scale(0.5); transform-origin: top center; }
    }
	

/* Ajuste exclusivo para DESKTOP (computador) */
@media (min-width: 769px) {
  #piramide-masculina .pyramid {
    transform: scale(0.85); /* Ajuste esse valor se quiser maior/menor */
    transform-origin: top center;
  }

  html, body {
    height: 100vh;
    overflow-y: hidden; /* Remove a barra de rolagem */
  }
}

.title-container {
  -webkit-user-select: none; /* Safari */
  -moz-user-select: none;    /* Firefox */
  -ms-user-select: none;     /* IE10+/Edge */
  user-select: none;         /* Padrão */ 
}

/* ================================================================= */
/* VERSÃO FINAL - Fonte Aumentada                                  */
/* ================================================================= */
@media (max-width: 768px) {
    
    /* Mantém a borda original, porém um pouco mais forte */
    #piramide-feminina .cell {
        border: 1.5px solid #777777; 
    }

    /* Regra para o NOME da jogadora */
    #piramide-feminina .nome {
        color: #483D8B;       /* Azul-ardósia escuro */
        font-weight: bold;    /* Texto em negrito */
        font-size: 1.1em;     /* NOVO: Aumenta a fonte em 10% */
    }

    /* Regra para o NÚMERO/EMOJI da posição */
    #piramide-feminina .badge {
        color: #483D8B;       /* Azul-ardósia escuro */
        font-size: 1.15em;    /* NOVO: Aumenta o emoji para acompanhar */
    }

    /* Mantém os ajustes de escala que já existiam */
    #piramide-masculina .pyramid { 
        transform: scale(0.30); 
        transform-origin: top center; 
    }
    #piramide-feminina .pyramid { 
        transform: scale(0.5); 
        transform-origin: top center; 
    }
}

/* REGRA ADICIONAL PARA CRIAR A LINHA INFERIOR NO BOTÃO SELECIONADO */
.tab-button.selected::after {
    content: "";
    display: block;
    width: 100%; /* CORRIGIDO: Linha com 100% da largura do botão */
    height: 3px;
    background-color: #333;
    position: absolute;
    bottom: -8px; /* Posição abaixo do botão, ajuste se necessário */
    left: 0;   /* CORRIGIDO: Alinha a linha à esquerda */
}


</style>


  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body onload="inicializarPagina()">

    <div id="loadingOverlay" class="loading-overlay">
        Carregando... Aguarde.
    </div>

    <div class="tab-container">
        <button id="btn-masculina" class="tab-button masculina selected" onclick="showTab('masculina')">Masculina</button>
        <button id="btn-feminina" class="tab-button feminina" onclick="showTab('feminina')">Feminina</button>
    </div>

    <div id="piramide-masculina" class="tab-content active">
        <div class="title-container"> Clube Olímpico<br> Pirâmide Masculina <div class="divider"></div> </div>
        <div class="pyramid-container"> <div class="pyramid" id="pyramid-masculina-data"></div> </div>
    </div>
    <div id="piramide-feminina" class="tab-content">
        <div class="title-container"> Clube Olímpico<br> Pirâmide Feminina <div class="divider"></div> </div>
        <div class="pyramid-container">
            <div class="pyramid" id="pyramid-feminina-data">
                <div class="row"><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog1"></div></div></div>
                <div class="row"><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog2"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog3"></div></div></div>
                <div class="row"><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog4"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog5"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog6"></div></div></div>
                <div class="row"><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog7"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog8"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog9"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog10"></div></div></div>
                <div class="row"><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog11"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog12"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog13"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog14"></div></div><div class="cell"><div class="badge"></div><div class="nome" id="fem-jog15"></div></div></div>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "SUA_API_KEY",
            authDomain: "agenda-5ce95.firebaseapp.com",
            databaseURL: "https://agenda-5ce95-default-rtdb.firebaseio.com/",
            projectId: "agenda-5ce95",
            storageBucket: "agenda-5ce95.appspot.com",
            messagingSenderId: "852007565195",
            appId: "1:852007565195:web:d7bd789d140858f53f618e"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // --- INÍCIO DA LÓGICA PIRÂMIDE MASCULINA (Original) ---
        function gerarPiramideMasculinaHTML() {
    const container = document.getElementById('pyramid-masculina-data');
    let content = '';
    for (let i = 0, pos = 1; i < 9; i++) {
        content += '<div class="row">';
        content += `<div style="width: 30px; height: 80px; display: flex; justify-content: center; align-items: center; font-size: 16px;">${i + 1}</div>`;
        for (let j = 0; j <= i; j++, pos++) {
            const posicaoHTML = pos === 1 ? '🏆1' : pos;
            content += `<div class="cell" id="masc-pos${pos}"><span class="posicao">${posicaoHTML}</span><span class="nome" id="masc-jog${pos}"></span></div>`;
        }
        content += '</div>';
    }
    container.innerHTML = content;
}


        // Função para ajustar a cor da fonte (Original)
        function ajustarCorFonte(elemento, posicao) {
            if (posicao <= 3) { 
                elemento.style.color = "#1a1a1a";
            } else if (posicao <= 10) { 
                elemento.style.color = "#2c3e50";
            } else if (posicao <= 21) { 
                elemento.style.color = "#808080 ";
            } else { 
                elemento.style.color = "#d9d9d9";
            }
        }

        function carregarPiramideMasculina() {
            return database.ref("sistemas/cadastro/jogadores").once("value").then(snapshot => {
                snapshot.forEach(childSnapshot => {
                    const jogador = childSnapshot.val();
                    if (jogador.piramide && parseInt(jogador.piramide) >= 1 && parseInt(jogador.piramide) <= 45) {
                        const posicao = parseInt(jogador.piramide);
                        const cellNome = document.getElementById(`masc-jog${posicao}`);
                        if (cellNome) {
                            cellNome.textContent = jogador.apelido || childSnapshot.key;
                            const parentCell = cellNome.parentElement;
                            parentCell.dataset.nome = childSnapshot.key;
                            parentCell.dataset.classe = jogador.classe || "Sem classe";
                            
                            // *** CHAMADA DA FUNÇÃO RESTAURADA AQUI ***
                            ajustarCorFonte(parentCell, posicao);

                            parentCell.addEventListener("click", function() {
                                alert(`Nome: ${this.dataset.nome}\nClasse: ${this.dataset.classe}`);
                            });
                        }
                    }
                });
            });
        }
        // --- FIM DA LÓGICA MASCULINA ---
        
        // --- INÍCIO DA LÓGICA PIRÂMIDE FEMININA (Original) ---
        function getEmojiNumero(posicao) {
            if (posicao === 1) return "👑1";
            if (posicao === 2) return "✨2";
            if (posicao === 3) return "🌷3";  
            return "🌿" + posicao;
        }

        function carregarPiramideFeminina() {
            return database.ref("sistemas/cadastro/jogadores").once("value").then(snapshot => {
                snapshot.forEach(childSnapshot => {
                    const jogador = childSnapshot.val();
                    if (jogador.piramide) {
                        const posicaoNoBanco = parseInt(jogador.piramide);
                        if (posicaoNoBanco >= 61 && posicaoNoBanco <= 75) { 
                            const posicaoNaTela = posicaoNoBanco - 60;
                            const nomeDiv = document.getElementById(`fem-jog${posicaoNaTela}`);
                            if (nomeDiv) {
                                const nomeFinal = jogador.apelido || childSnapshot.key;
                                const badge = nomeDiv.parentElement.querySelector(".badge");
                                badge.textContent = getEmojiNumero(posicaoNaTela);
                                nomeDiv.innerHTML = nomeFinal.trim().split(" ").map(parte => `<div>${parte}</div>`).join("");
                                const parentCell = nomeDiv.parentElement;
                                parentCell.dataset.nome = childSnapshot.key;
                                parentCell.dataset.classe = jogador.classe || "Feminino";
                                parentCell.addEventListener("click", function () {
                                    alert(`Nome: ${this.dataset.nome}\nClasse: ${this.dataset.classe}`);
                                });
                            }
                        }
                    }
                });
            });
        }
        // --- FIM DA LÓGICA FEMININA ---
        
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('selected'));
            document.getElementById(`piramide-${tabId}`).classList.add('active');
            document.getElementById(`btn-${tabId}`).classList.add('selected');
        }

        function inicializarPagina() {
            gerarPiramideMasculinaHTML();
            
            Promise.all([
                carregarPiramideMasculina(),
                carregarPiramideFeminina()
            ]).then(() => {
                const loadingOverlay = document.getElementById("loadingOverlay");
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = "none";
                }, 500);
            }).catch(error => {
                console.error("Erro ao carregar as pirâmides:", error);
                document.getElementById("loadingOverlay").style.display = "none";
            });
        }
		

// salvar a imagem		
document.querySelectorAll('.title-container').forEach(title => {
    title.addEventListener('dblclick', () => {
        const parentTab = title.closest('.tab-content');
        html2canvas(parentTab, {
            backgroundColor: null,
            scale: 2
        }).then(canvas => {
            const link = document.createElement("a");
            const tabName = parentTab.id.includes("masculina") ? "piramide_masculina" : "piramide_feminina";
            link.download = `${tabName}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();

            alert(`✅ Imagem da ${tabName.replace("_", " ")} salva com sucesso!`);
        });
    });
});





    </script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
